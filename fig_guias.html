<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Fig Web Guias</title>
  <style>
            body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding-top: 100px;
            background-color: #f9f9f9;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            transition: background-image 0.5s ease;
        }

        /* Estilos para el botón de cerrar sesión */
        .logout-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logout-btn {
            background: #c62828;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: #b71c1c;
            transform: translateY(-1px);
        }
        
        .session-timer {
            color: #8000ff;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 4px;
        }

    .settings-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      cursor: pointer;
    }

    .settings-btn img {
      width: 30px;
      height: 30px;
    }

    .settings-menu {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      height: 100vh;
      width: 250px;
      background: #eeeeee;
      box-shadow: -4px 0 10px rgba(0,0,0,0.2);
      padding: 20px;
      z-index: 999;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    .settings-menu button {
      background-color: #8000ff;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 10px 14px;
      margin: 10px 0;
      width: 100%;
      cursor: pointer;
    }

    .close-settings {
      background-color: #a53c5f !important;
      color: white;
      margin-top: 30px;
    }

    .titulo-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-bottom: 10px;
    }

    .titulo-container img {
      width: 80px;
      height: 80px;
      object-fit: contain;
    }

    h1 {
      font-size: 64px;
      color: #8000ff;
      margin: 0;
    }

    h5 {
      color: #4b0095;
      margin: 10;
    }

    .subtitulo {
      color: #777;
      margin-bottom: 40px;
      font-size: 14px;
      transition: color 0.3s ease;
    }

    .instituciones-container {
      margin-bottom: 40px;
    }

    select {
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 300px;
    }

    .archivos-container {
      display: none;
      flex-direction: column;
      gap: 15px;
      max-width: 800px;
      margin: 0 auto;
      text-align: left;
    }

    .archivo {
      background-color: #ffffffb2;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .archivo h3 {
      margin-top: 0;
      color: #8000ff;
    }

    .archivo p {
      margin-bottom: 10px;
    }

    .archivo button {
      background-color: #8000ff;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }

    .fixed-footer {
      position: fixed;
      bottom: 10px;
      width: 100%;
      text-align: center;
      color: #6c6c6c;
      font-size: 12px;
    }

    .modal {
      position: fixed;
      z-index: 1001;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #fff;
      padding: 20px 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
      position: relative;
    }

    .modal-content h2 {
      margin-top: 0;
      color: #8000ff;
    }

    .modal-content .close {
      position: absolute;
      top: 10px;
      right: 15px;
      color: #aaa;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
    }

    .modal-content ul {
      text-align: left;
      font-size: 14px;
      padding-left: 20px;
    }

    .modal-content a {
      color: #8000ff;
      text-decoration: none;
    }

    .modal-content a:hover {
      text-decoration: underline;
    }

    .instituciones-container {
      margin: 10px 0;
    }

    .archivo {
      margin: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .archivos-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
            /* Agregar estos estilos para el botón de cerrar sesión */
            .logout-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logout-btn {
            background: #c62828;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .logout-btn:hover {
            background: #b71c1c;
            transform: translateY(-1px);
        }
        
        .session-timer {
            color: #8000ff;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 4px;
        }
  </style>
  <link rel="icon" type="image/png" href="img_higo/fig_logo.png">
</head>
<body>
    <!-- Contenedor para cerrar sesión -->
    <div class="logout-container">
        <div class="session-timer" id="sessionTimer">Sesión: 30:00</div>
        <button class="logout-btn" id="logoutBtn">Cerrar Sesión</button>
    </div>

<div class="titulo-container">
  <a href="https://grupoemiliocolor.github.io/mx/index.html" target="_blank">
    <img src="img_higo/fig_logo.png" alt="Logo">
  </a>
  <h1>Fig Web</h1>
</div>

<h5>GUIAS DE ESTUDIO NIVEL SUPERIOR Y MEDIO SUPERIOR</h5>

<div class="instituciones-container">
  <select id="selectorInstitucion">
    <option value="">Selecciona una institución</option>
    <option value="IPN">IPN</option>
    <option value="UAM">UAM</option>
    <option value="UNAM">UNAM</option>
    <option value="COMIPEMS">COMIPEMS</option>
  </select>
  <select id="selectorSubcategoria" style="display:none; margin-top: 10px;">
    <option value="">Selecciona una categoría</option>
  </select>
</div>

<div class="archivos-container" id="archivosContainer"></div>

<div class="fixed-footer">Fig Web © Grupo EmilioColor®</div>

<div id="creditosModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Créditos de Imágenes</h2>
    <ul>
      <li>Foto de Ella Olsson: <a href="https://www.pexels.com/es-es/foto/frutas-surtidas-en-un-tazon-1458695/" target="_blank">ver imagen</a></li>
      <li>Foto de Lum3n: <a href="https://www.pexels.com/es-es/foto/frutas-de-guayaba-en-rodajas-en-la-mesa-1410237/" target="_blank">ver imagen</a></li>
      <li>Foto de Pixabay: <a href="https://www.pexels.com/es-es/foto/fruta-roja-y-amarilla-33791/" target="_blank">ver imagen</a></li>
      <li>Foto de Tijana Drndarski: <a href="https://www.pexels.com/es-es/foto/variedad-de-frutas-3252136/" target="_blank">ver imagen</a></li>
      <li>Foto de Vanessa Loring: <a href="https://www.pexels.com/es-es/foto/nueces-moradas-y-marrones-en-plato-redondo-marron-5965953/" target="_blank">ver imagen</a></li>
    </ul>
  </div>
</div>

<script>
  const selector = document.getElementById('selectorInstitucion');
  const selectorSub = document.getElementById('selectorSubcategoria');
  const contenedor = document.getElementById('archivosContainer');

  const datos = {
    IPN: {
      'Guías de ingreso a nivel superior': [
        { 
          titulo: 'Guía oficial IPN 2025', 
          descripcion: 'Archivo con temas de ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1LUnCuYqbN3wVfA0jSbqtwVuENH2e_4K5/preview' 
        },
        { 
          titulo: 'Guía oficial IPN 2021', 
          descripcion: 'Archivo con temas de ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1bOLpMiSWp5WM5QYeoH5F4NszvmWDAuQD/preview' 
        },
        { 
          titulo: 'Guía oficial IPN 2020', 
          descripcion: 'Archivo con temas de ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1VITfy9pvZ0QcXFkjMfPoeR_8HH1eKXS5/preview' 
        },
        { 
          titulo: 'Guía oficial IPN 2019 (1)', 
          descripcion: 'Archivo con temas de ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1K3iTmH9jf66Fy8XqKV88Z2Ve3V63T7dN/preview' 
        },
        { 
          titulo: 'Guía oficial IPN 2019 (2)', 
          descripcion: 'Archivo con temas de ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1VwSrcGelhq5Jg6WFFDu_lgpbLWw51-YR/preview' 
        },
        { 
          titulo: 'Guía oficial IPN 2018', 
          descripcion: 'Archivo con temas de ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/11fZB5ykKNgi0fypPbQ2-KJwJT2-UjQJx/preview' 
        }
      ],
      'Exámenes simulacro': [
      { 
          titulo: 'Examen Pre-Simulacro IPN 0 (2020)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1ZSW_gDB6U6ioNv8t_llwEOpmye2-9JY6/preview' 
        },
        { 
          titulo: 'Examen Simulacro IPN 1 (2015)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1PDt1r9-_rGy7KExXod5yzR8yt07dNqo7/preview' 
        },
        { 
          titulo: 'Examen Simulacro IPN 2 (2015)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1NWSx6-K8eF7hXB77wx26nFdTaKAXHl0d/preview' 
        },
        { 
          titulo: 'Examen Simulacro IPN 3 (2015)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/17apD9Da09PG7LAJDVSU20JMr8u6vz6Xy/preview' 
        },
        { 
          titulo: 'Examen Simulacro IPN 4 (2015)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1XF7bRxFYz4cWeFy1ILZ2oNKNpt-xiK99/preview' 
        },
        { 
          titulo: 'Examen Simulacro IPN 5 (2015)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/1A3JYohrb3WigBREnPOCR4NVIsKBbrooA/preview' 
        },
        { 
          titulo: 'Examen Simulacro IPN 6 (2015)', 
          descripcion: 'Archivo con temas de exámen para ingreso al IPN.', 
          enlace: 'https://drive.google.com/file/d/101OKR2x3PCRkMMLUmr2MxMi-we_UhiaB/preview' 
        }
      ]
    },
    UAM: {
      'Ciencias y Artes para el Diseño': [
        { 
          titulo: 'Guía UAM', 
          descripcion: 'Guía completa para el examen a CAD', 
          enlace: 'https://drive.google.com/file/d/164R7hN3qZF3z_iZOZbtcfl3F48QAWvE9/preview' 
        }
      ],
      'Ciencias Básicas e Ingeniería': [
        { 
          titulo: 'Guía UAM', 
          descripcion: 'Guía completa para el examen a CBI', 
          enlace: 'https://drive.google.com/file/d/1Sd_XZJd16GxK8xJXB2dy9XYF2nlO6e89/preview' 
        },
        { 
          titulo: 'Guía UAM', 
          descripcion: 'Guía completa para el examen a CBI 2013', 
          enlace: 'https://drive.google.com/file/d/1qc50V2GSxMFT-CYyFE7zlFmjH35uJwHE/preview' 
        },
      ],
      'Ciencias Biológicas y de la Salud': [
        { 
          titulo: 'Guía UAM', 
          descripcion: 'Guía completa para el examen a CBS', 
          enlace: 'https://drive.google.com/file/d/1D0ojt7UmgrgzFVeFhPSisP_dlznfxU2W/preview' 
        },
        { 
          titulo: 'Exámen simulacro UAM', 
          descripcion: 'Exámen a CBS', 
          enlace: 'https://drive.google.com/file/d/1y2tzGTQsV7_xI0WoqBSvFeJ6VAsgPmvO/preview' 
        },
      ],
      'Ciencias Sociales y humanísticas': [
        { 
          titulo: 'Introducción a UAM', 
          descripcion: 'Libro de introducción a UAM.', 
          enlace: 'https://drive.google.com/file/d/1wfm9DECI-Z3-9u9gJGQNxwJtGz5uE0tV/preview' 
        },
        { 
          titulo: 'Guía desarrollada a UAM', 
          descripcion: 'Guía de estudio para UAM.', 
          enlace: 'https://drive.google.com/file/d/1h-5jqTEA69Nv7cYkh0Sb3OyFstSRgs8y/preview' 
        },
        { 
          titulo: 'Guía a UAM', 
          descripcion: 'Guía de estudio para UAM.', 
          enlace: 'https://drive.google.com/file/d/1LEUYxa4lFmHXavqvbM6rOHnB8fyhVZ7d/preview' 
        },
      ]
    },
    UNAM: {
      'Área 1': [
        { 
          titulo: 'Guía UNAM Área 1', 
          descripcion: 'Material especializado para Área 1.', 
          enlace: 'https://ejemplo.com/unam-area1' 
        }
      ],
      'Simuladores': [
        { 
          titulo: 'Simulador UNAM', 
          descripcion: 'Simulador para el examen UNAM.', 
          enlace: 'https://ejemplo.com/simulador-unam' 
        }
      ]
    },
    COMIPEMS: {
      'Guías': [
        { 
          titulo: 'Guía COMIPEMS 2024', 
          descripcion: 'Guía oficial para COMIPEMS.', 
          enlace: 'https://ejemplo.com/guia-comipems' 
        }
      ],
      'Material Apoyo': [
        { 
          titulo: 'Temas COMIPEMS', 
          descripcion: 'Temas frecuentes en el examen.', 
          enlace: 'https://ejemplo.com/temas-comipems' 
        }
      ]
    }
  };

  selector.addEventListener('change', () => {
    const valor = selector.value;
    selectorSub.innerHTML = '<option value="">Selecciona una categoría</option>';
    selectorSub.style.display = 'none';
    contenedor.innerHTML = '';
    if (valor && datos[valor]) {
      selectorSub.style.display = 'inline-block';
      for (const categoria in datos[valor]) {
        const option = document.createElement('option');
        option.value = categoria;
        option.textContent = categoria;
        selectorSub.appendChild(option);
      }
    }
  });

  selectorSub.addEventListener('change', () => {
    const institucion = selector.value;
    const categoria = selectorSub.value;
    contenedor.innerHTML = '';

    if (institucion && categoria && datos[institucion] && datos[institucion][categoria]) {
      datos[institucion][categoria].forEach(archivo => {
        const div = document.createElement('div');
        div.classList.add('archivo');
        div.innerHTML = `
          <h3>${archivo.titulo}</h3>
          <p>${archivo.descripcion}</p>
          ${archivo.enlace.includes('drive.google.com') ? `
            <iframe 
              src="${archivo.enlace}" 
              width="100%" 
              height="800px" 
              style="border: 1px solid #ccc; border-radius: 10px; margin-top: 10px;">
            </iframe>
          ` : `
            <button onclick="window.open('${archivo.enlace}', '_blank')">Ver</button>
          `}
        `;
        contenedor.appendChild(div);
      });
    }
  });

  // Verificación de autenticación y temporizador de sesión
  const isAuthenticated = sessionStorage.getItem('authenticated') === 'true';
  const expiresAt = parseInt(sessionStorage.getItem('expiresAt'), 10) || Date.now() + 30 * 60 * 1000; // 30 minutos por defecto
  const now = Date.now();

  if (!isAuthenticated || isNaN(expiresAt) || now > expiresAt) {
      sessionStorage.clear();
      window.location.href = 'https://grupoemiliocolor.github.io/mx/index.html';
  } else {
      // Guardar el nuevo tiempo de expiración si es necesario
      sessionStorage.setItem('expiresAt', (Date.now() + 30 * 60 * 1000).toString());
  }

  // Configurar el temporizador de sesión
  const sessionTimer = document.getElementById('sessionTimer');
  const logoutBtn = document.getElementById('logoutBtn');

  function updateSessionTimer() {
      const now = Date.now();
      const expiresAt = parseInt(sessionStorage.getItem('expiresAt'), 10);
      const remainingTime = Math.max(0, expiresAt - now);
      
      // Calcular minutos y segundos correctamente
      const minutes = Math.floor(remainingTime / (60 * 1000));
      const seconds = Math.floor(remainingTime % (60 * 1000)) / 1000;
      
      // Mostrar el tiempo restante con formato 00:00
      sessionTimer.textContent = `Sesión: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      if (remainingTime <= 0) {
          sessionStorage.clear();
          window.location.href = 'https://grupoemiliocolor.github.io/mx/index.html';
      }
  }

  // Actualizar el temporizador cada segundo
  updateSessionTimer();
  const timerInterval = setInterval(updateSessionTimer, 1000);

  // Configurar el botón de cerrar sesión
  logoutBtn.addEventListener('click', function() {
      sessionStorage.clear();
      window.location.href = 'https://grupoemiliocolor.github.io/mx/index.html';
  });

  // Verificar inactividad del usuario (30 minutos)
  let inactivityTimer;
  const resetInactivityTimer = () => {
      clearTimeout(inactivityTimer);
      inactivityTimer = setTimeout(() => {
          sessionStorage.clear();
          window.location.href = 'https://grupoemiliocolor.github.io/mx/index.html';
      }, 30 * 60 * 1000); // 30 minutos
  };

  // Reiniciar el temporizador con eventos de usuario
  ['mousemove', 'keydown', 'click'].forEach(event => {
      document.addEventListener(event, resetInactivityTimer);
  });

  // Iniciar el temporizador
  resetInactivityTimer();
</script>

</body>
</html>